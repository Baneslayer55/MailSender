## MailSender
### Что это?
**MailSender** - это простой API сервис для массовой рассылки сообщений.
### Как это работает?
Класс **MailsController** содержит в себе два метода, обрабатывающих http запросы. 

Метод **SendMails** принимает **POST** запрос по адресу **url/api/mails/**, с телом в формате **JSON** вида:
```json
{
	"subject": "Subject text",
	"body": "Body text",
	"recipients": ["example@provider.domain", "example2@provider.domain"]
} 
```
В случае валидной структуры тела происходит десериализация в сущность **Mail**, передача в статический метод **Send** класса **MailService** для отправки письма адресатам, а затем запись в базу данных всех полей сущности(даже в случае, если ни одному из адресатов не удалось отправить сообщение).

Метод **GetMailHistory** принимает **GET** запрос по адресу **url/api/mails/** и возвращает историю всех полученных **POST** запросов с валидным **JSON** телом.

### Описание сущности Mail

| Наименование поля  | Описание, формат  |
| :------------: | :------------: |
| Subject  | Тема сообщения, текст   |
|  Body |  Тело сообщения, текст |
|  Recipients | Список адресатов, массив   |
| IsSended  | Статус отправки, булева  |
| SendingDateTime  | Дата отправки, дата  |
| ErrorMessage  |   Сообщения об ошибках, текст |

### Файл mailconfig.json 
Данный файл содержит данные, предоставляемые вашим провайдером для реализации сервиса автоматической отправки сообщений в формате: 
```json
{
  	"host": "smtp.ethereal.email",
  	"port": "587",
  	"user": "brisa.bosco@ethereal.email",
  	"password": "AArwGt1Dhr45q9GCUv"
}
```


### Комментарии к проекту:
1. Настройки почтового ящика взяты на бесплатном ресурсе [ethereal.email](http://ethereal.email "ethereal.email")(предоставляет аккаунт для тестирования авторассылки сообщений). В связи с этим файл конфигурации **mailconfig.json**, приложенный к проекту оставляю заполненым.
2. Библиотека **MailKit** не очень хорошо справляется с валидацей почтовых адресов. В связи с этим в статический метод **Send** класса **MailService** содержит дополнительную проверку на валидность почтового адреса.
3. Поле **IsSended** сущности **Mail** принимает значение *true* в случае, если хотя бы один почтовый адрес прошел валидацию и метод **Send** смог отправить ему сообщение. Список невалидных почтовых адресов находится в поле **ErrorMessage** сущности **Mail**.



